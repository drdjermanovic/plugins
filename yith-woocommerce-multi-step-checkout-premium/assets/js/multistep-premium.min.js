(function(b){b.fn.yith_trigger_multiple=function(a){return this.each(function(){var c=b(this);b.each(a,function(a,b){c.trigger(b)})})};var g=b("body"),G=b("html"),q=b(yith_wcms.dom.login),w=b(yith_wcms.dom.billing),r=b(yith_wcms.dom.shipping),z=b(yith_wcms.dom.order),t=b(yith_wcms.dom.payment),m=b(yith_wcms.dom.form_actions),A=b(yith_wcms.dom.coupon),x=b(yith_wcms.dom.create_account),B=b(yith_wcms.dom.create_account_wrapper);b(yith_wcms.dom.account_password);var u=b(yith_wcms.dom.shipping_check),
    v={login:q,billing:w,shipping:r,order:z,payment:t},H=g.hasClass("logged-in"),C=function(a,c,d){0==c.length||c.is(":checked")||0==a||(a-=d.find(".validate-required").length,yith_wcms.wp_gdpr.is_enabled&&1==yith_wcms.wp_gdpr.add_consent_on_checkout&&(a=invalid_field+yith_wcms.wp_gdpr.consents_number));0!=c.length&&c.is(":checked")&&yith_wcms.wp_gdpr.is_enabled&&1==yith_wcms.wp_gdpr.add_consent_on_checkout&&b.each(yith_wcms.wp_gdpr.consents,function(c,d){consent="#user_consents_"+c;b(consent).is(":checked")||
    (a+=1)});return a};g.on("updated_checkout yith_wcms_myaccount_order_pay",function(a){"updated_checkout"==a.type&&(v.payment=b(yith_wcms.dom.payment));"payment"==m.data("step")&&b(yith_wcms.dom.payment).show();g.trigger("yith_wcms_updated_checkout")});g.hasClass("woocommerce-order-pay")&&g.trigger("yith_wcms_myaccount_order_pay");"yes"==yith_wcms.live_fields_validation&&(b(yith_wcms.dom.checkout_form),g.on("blur","input:radio",function(){var a=b(this),c=a.closest(".form-row"),d=!0;c.is(".validate-required")&&
("radio"==a.attr("type")&&(a=a.attr("name"),b("input[name="+a+"]").is(":checked")||(c.removeClass("woocommerce-validated").addClass("woocommerce-invalid woocommerce-invalid-required-field"),d=!1)),d&&c.removeClass("woocommerce-invalid woocommerce-invalid-required-field").addClass("woocommerce-validated"))}));g.on("yith_wcms_select2",function(a){if(b().select2){var c=function(){b("select.country_select, select.state_select").each(function(){var a={placeholder:b(this).attr("placeholder"),placeholderOption:"first",
    width:"100%"};b(this).select2(a)})};c();g.bind("country_to_state_changed",function(){c()})}});1!=yith_wcms.wc_shipping_multiple&&g.trigger("yith_wcms_select2");b(".yith-wcms-pro "+yith_wcms.dom.checkout_timeline+" li").on("click",function(a){var c=b(this);if(c.hasClass("active"))return!1;a=b(yith_wcms.dom.checkout_timeline).find(yith_wcms.dom.active_timeline).data("step");c=c.data("step");var d=yith_wcms.steps_timeline[c],k=!1!==d.prev?yith_wcms.steps_timeline[d.prev]:yith_wcms.steps_timeline[d.next];
    d=k.next;k=k.prev;var e=null;d==c?e=m.find(yith_wcms.dom.button_next):k==c&&(e=m.find(yith_wcms.dom.button_prev));if("login"==a&&H||null==e)return!1;D(e,a,d,k)});m.find(yith_wcms.dom.button_prev).add(yith_wcms.dom.button_next).on("click",function(a){a=b(this);var c=m.data("step"),d=yith_wcms.steps_timeline[c];D(a,c,d.next,d.prev)});var D=function(a,c,d,k){var e=b(yith_wcms.dom.checkout_timeline);a=a.data("action");var y=m.find(yith_wcms.dom.button_prev),l=m.find(yith_wcms.dom.button_next),h=e.find(".active").data("step"),
    p=b(yith_wcms.dom.checkout_form);"prev"==a&&l.removeClass("disabled").removeAttr("disabled");if("yes"==yith_wcms.is_scroll_top_enabled){var f=b(yith_wcms.dom.scroll_top_anchor);f=f.offset().top-f.outerHeight(!0);G.add(g).animate({scrollTop:f},500)}var q=function(a){"order"==a?A.fadeIn(yith_wcms.transition_duration):A.fadeOut(yith_wcms.transition_duration)};if("yes"==yith_wcms.live_fields_validation&&(f="login"==h||"billing"==h||"shipping"==h,yith_wcms.is_delivery_date_enabled&&(f=f||"order"==h),f&&
"next"==a)){p=b(yith_wcms.dom.checkout_form);f=0;("billing"==h||"shipping"==h||yith_wcms.is_delivery_date_enabled&&"order"==h)&&p.find(yith_wcms.dom.required_fields_check).yith_trigger_multiple(yith_wcms.validate_checkout_event);if("billing"==h||"login"==h){if(yith_wcms.is_coupon_email_system_enabled&&(f=b(yith_wcms.dom.day_of_birth),"undefined"!=typeof f)){var n=f.attr("pattern");n=new RegExp("^"+n+"$","g");var t=f.val();""!=t&&0==n.test(t)&&f.parent().removeClass("woocommerce-validated").addClass("woocommerce-invalid-required-field").addClass("woocommerce-invalid")}f=
    b(yith_wcms.dom.email);"undefined"!=typeof f&&f.hasClass("woocommerce-invalid-email")&&f.addClass("woocommerce-invalid-required-field");f=w.find(yith_wcms.dom.wc_invalid_required).length;f=C(f,x,B)}else if("shipping"==h){n=u.length;if(0!=n&&u.is(":checked")||0==n&&r.find("input").length)f=r.find(yith_wcms.dom.wc_invalid_required).length;yith_wcms.is_wc_checkout_addons_enabled&&(n=b(yith_wcms.dom.wc_checkout_addons),f+=n.find(yith_wcms.dom.wc_invalid_required).length);n=r.find(yith_wcms.dom.additional_fields).find(">"+
    yith_wcms.dom.wc_invalid_required).length;f+=n}else yith_wcms.is_delivery_date_enabled&&"order"==h&&(f=z.find(yith_wcms.dom.wc_invalid_required).length);if(0!=f){if("login"!=h)return l.addClass("disabled").attr("disabled",!0),!1;d="billing"}}e.find(".active").removeClass("active");"next"==a?(m.data("step",d),v[c].fadeOut(yith_wcms.transition_duration,function(){v[d].fadeIn(yith_wcms.transition_duration);q(d)}),b(yith_wcms.dom.timeline_id_prefix+d).toggleClass("active")):"prev"==a&&(m.data("step",
    k),v[c].fadeOut(yith_wcms.transition_duration,function(){v[k].fadeIn(yith_wcms.transition_duration)}),q(k),b(yith_wcms.dom.timeline_id_prefix+k).toggleClass("active"));c=m.data("step");1==yith_wcms.use_cookie&&Cookies.set("yith_wcms_checkout_current_step",c,{path:"/"});!0===("prev"==a&&!1===yith_wcms.steps_timeline[k][a]&&"login"==k)?l.val(yith_wcms.skip_login_label):l.val(yith_wcms.next_label);h=e=!1;"next"==a&&!1===yith_wcms.steps_timeline[d][a]&&(h=!0);"prev"==a&&!1===yith_wcms.steps_timeline[k][a]&&
(e=!0);!0===e?y.fadeOut(yith_wcms.transition_duration):y.fadeIn(yith_wcms.transition_duration);!0===h?l.fadeOut(yith_wcms.transition_duration):l.fadeIn(yith_wcms.transition_duration);"payment"==c?(p.removeClass("processing"),"yes"==yith_wcms.disabled_prev_button&&y.fadeOut(yith_wcms.transition_duration)):p.addClass("processing")},p=m.find(yith_wcms.dom.button_next);w.find(".validate-required").find("input").add(x).on("blur click change",function(a){a=w.find(yith_wcms.dom.wc_invalid_required).length;
    a=C(a,x,B);0!=a?p.addClass("disabled").attr("disabled",!0):p.removeClass("disabled").removeAttr("disabled")});r.find(".validate-required").find("input").add(u).on("blur click change",function(a){u.is(":checked")?0!=r.find(yith_wcms.dom.wc_invalid_required).length?p.addClass("disabled").attr("disabled",!0):p.removeClass("disabled").removeAttr("disabled"):p.removeClass("disabled").removeAttr("disabled")});q=Cookies.get("yith_wcms_checkout_form");t=Cookies.get("yith_wcms_checkout_current_step");var E=
    function(){var a=b(".checkout.woocommerce-checkout").serialize();Cookies.set("yith_wcms_checkout_form",a,{path:"/"})},F=function(){u.find("input").on("change",function(a){E()});b(yith_wcms.dom.checkout_form).find(yith_wcms.dom.required_fields_check).on("blur change",function(a){E()})},I=function(a,c){if("undefined"!=typeof a){var d=a.split("&"),k;for(k in d){var e=d[k];if("string"==typeof e){e=e.split("=");var g=decodeURIComponent('input[name="'+e[0]+'"]');g=b(g);if("undefined"!=typeof g){var l=decodeURIComponent(e[1]).replace(/\+/g,
    " ");if(-1!=yith_wcms.dom.select2_fields.indexOf(e[0]))e=b("#"+decodeURIComponent(e[0])),e.add(g).val(l),e.is("select")?e.val(l).trigger("change"):e.is("input")&&g.val(l);else{var h=!1;-1!=e[0].indexOf("payment_method")&&1==yith_wcms.skip_payment_method&&(h=!0);-1!=e[0].indexOf("shipping_method")&&1==yith_wcms.skip_shipping_method&&(h=!0);-1==e[0].indexOf("_wp")&&l&&0==h&&("checkbox"==g.prop("type")&&1==l?g.prop("checked","checked"):g.val(l))}}}}}};1==yith_wcms.use_cookie&&(F(),I(q,t),g.on("country_to_state_changed",
    function(a,b,d){F()}));if("undefined"!=typeof Cookies.get("yith_wcms_checkout_current_step")&&1==yith_wcms.use_cookie)g.on("updated_checkout yith_wcms_myaccount_order_pay",function(){b(".yith-wcms-pro "+yith_wcms.dom.checkout_timeline+" li#timeline-"+Cookies.get("yith_wcms_checkout_current_step")).trigger("click")});1==yith_wcms.is_order_received_endpoint&&1==yith_wcms.use_cookie&&(Cookies.remove("yith_wcms_checkout_form",{path:"/"}),Cookies.remove("yith_wcms_checkout_current_step",{path:"/"}))})(jQuery);