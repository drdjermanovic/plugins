/*
 2018 ThemePunch
*/
(function(){function l(b,a){this.slider=b;this.effects=a;this.firstrun=!0;b.one("revolution.slide.onloaded",this.onLoaded.bind(this)).one("rsLiquidEffectDestroyed",this.destroy.bind(this))}function k(b,a,c){this.w=a;this.h=c;this.slide=b;this.settings=b.data("liquideffectsettings");this.orig=b.data("liquideffectorig");this.displacement=new PIXI.Sprite.fromImage(this.settings.image,!0);this.displacement.texture.baseTexture.wrapMode=PIXI.WRAP_MODES.REPEAT;this.displacement.scale.x=2;this.displacement.scale.y=
2;this.displacement.anchor.set(.5);this.displacement.x=a/2;this.displacement.y=c/2;var g=new PIXI.Texture.fromImage(this.settings.sprite,!0),e=new PIXI.Container;this.img=new PIXI.Sprite(g);this.img.anchor.set(.5);this.img.x=a/2;this.img.y=c/2;e.addChild(this.img);this.filter=new PIXI.filters.DisplacementFilter(this.displacement);this.filter.autoFit=!0;this.stage=new PIXI.Container;this.stage.addChild(e);this.stage.addChild(this.displacement);this.stage.filters=[this.filter];this.stage.interactive=
!0;this.renderer=new PIXI.autoDetectRenderer(a,c,{transparent:!0});a=this.renderer.view.style;a.objectFit="cover";a.width="100%";a.height="100%";a.top="50%";a.left="50%";a.transform="translate( -50%, -50% ) scale(1.2)";b.find("rs-sbg-wrap").append(this.renderer.view);this.settings.autoplay?(this.filter.scale.x=this.settings.scalex,this.filter.scale.y=this.settings.scaley):(this.filter.scale.x=0,this.filter.scale.y=0);this.settings.interactive?(e.interactive=!0,"mousedown"===this.settings.event?(e.buttonMode=
!0,e.pointerdown=this.onClick.bind(this),e.pointerup=e.pointerout=this.onReturn.bind(this)):(e.pointerover=this.onMouseEnter.bind(this),e.pointermove=this.onMouseMove.bind(this),e.pointerout=this.onMouseLeave.bind(this))):this.renderer.view.style.pointerEvents="none";this.supressEvents=!0;this.started=!1;this.ticker=new PIXI.ticker.Ticker;this.ticker.add(this.tick.bind(this))}var h,m="ontouchend"in document;window.RsLiquideffectAddOn=function(b,a,c,g){if(b&&"undefined"!==typeof PIXI&&(a=b(a),a.length))return h=
b,h.event.special.rsLiquidEffectDestroyed={remove:function(b){b.handler()}},b=a.find("rs-slide[data-liquideffect]").each(function(){var b=h(this),a=JSON.parse(b.attr("data-liquideffect"));if(a){a.transcross=!0;var d=b.children("img");if(d.attr("data-lazyload"))var f=d.attr("data-lazyload");else f=d.attr("src"),d.attr("data-lazyload",f),d.attr("src",c+"public/assets/assets/dummy.png");f||(f=b.find("rs-sbg-wrap").contents().filter(function(){return 8===this.nodeType}),f.length?(d=f[0].nodeValue,f=!1,
d&&(d=d.split('data-lazyload="'),2===d.length?(d=d[1].split('"'),1<d.length&&(f=d[0])):(d=d.split('src="'),2===d.length&&(d=d[1].split('"'),1<d.length&&(f=d[0]))))):f=!1);f?(a.sprite=f,m&&a.mobile&&(a.interactive=!1),f="ei:"+a.easing+";eo:"+a.easing+";s:"+a.transtime+"ms;r:0;t:",f+=a.transcross?"crossfade":"fade",f+=";sl:0;",d=a.easing.split("."),a.easing=2===d.length?punchgs[d[0]][d[1]]:punchgs.hasOwnProperty(d[0])?punchgs[d[0]]:punchgs.Power3.easeInOut,b.attr("data-anim",f).removeAttr("data-panzoom").data({liquideffectsettings:a,
liquideffectorig:h.extend({},a)}),a.interactive&&(d=a.intereasing.split("."),a.intereasing=2===d.length?punchgs[d[0]][d[1]]:punchgs.hasOwnProperty(d[0])?punchgs[d[0]]:punchgs.Power3.easeInOut)):b.removeData("liquideffect").removeAttr("data-liquideffect")}}),b=a.find("rs-slide[data-liquideffect]"),b.length?new l(a,b):!1};l.prototype={onLoaded:function(){this.slider.on("revolution.slide.onbeforeswap",this.beforeChange.bind(this)).on("revolution.slide.onchange",this.onChange.bind(this))},onChange:function(b,
a){if(this.ranOnce){var c=a.prevSlide;!c||c instanceof h||(c=h(c));c&&c.length&&(c=c.removeClass("liquid-force-visible").data("liquideffectcanvas"))&&c.reset();c=a.currentSlide;!c||c instanceof h||(c=h(c));c&&c.length||(c=this.slider.find("rs-slide").eq(0));(c=c.data("liquideffectcanvas"))&&!c.started&&c.animateIn()}else c=a.slide,!c||c instanceof h||(c=h(c)),c&&c.length||(c=this.slider.find("rs-slide").eq(0)),this.beforeChange(!1,{nextslide:c})},beforeChange:function(b,a){function c(b,c){var d=new Image,
e=c.find("rs-sbg");d.crossOrigin="Anonymous";d.src=e.css("background-image").slice(4,-1).replace(/"/g,"");d.onload=function(){c.data("liquideffectcanvasprep",[parseInt(d.naturalWidth,10),parseInt(d.naturalHeight,10)]);b.imgCount++;b.imgCount===g.length&&b.run(a)}}this.ranOnce=!0;var g=[];this.effectsCreated||(this.effectsCreated=!0,this.effects.each(function(){var a=h(this),b=a.data("liquideffectsettings").imagesize.split("|");2===b.length?a.data("liquideffectcanvasprep",[parseInt(b[0],10),parseInt(b[1],
10)]):g[g.length]=this}));if(g.length)for(var e=this.imgCount=0;e<g.length;e++)c(this,h(g[e]));else this.run(a)},run:function(b){if(this.firstrun){var a=b.nextslide.data("liquideffectcanvas");!a&&(a=b.nextslide.data("liquideffectcanvasprep"))&&(a=new k(b.nextslide,a[0],a[1]),b.nextslide.removeData("liquideffectcanvasprep"),b.nextslide.data("liquideffectcanvas",a));a&&a.animateIn(!0);this.firstrun=!1}else b.currentslide&&(a=b.currentslide.data("liquideffectcanvas"))&&a.animateOut(b.nextslide),a=b.nextslide.data("liquideffectcanvas"),
!a&&(a=b.nextslide.data("liquideffectcanvasprep"))&&(a=new k(b.nextslide,a[0],a[1]),b.nextslide.removeData("liquideffectcanvasprep"),b.nextslide.data("liquideffectcanvas",a)),a&&(b.nextslide.addClass("liquid-force-visible"),a.settings.transcross&&a.animateIn())},destroy:function(){this.slider&&this.slider.off("revolution.slide.onloaded revolution.slide.onbeforeswap revolution.slide.onafterswap");this.effects&&this.effects.each(function(){h(this).removeData("liquideffectcanvas liquideffectsettings liquideffectorig")});
for(var b in this)this.hasOwnProperty(b)&&delete this[b]}};k.prototype={tick:function(b){this.settings.autoplay&&(this.settings.speedx&&(this.displacement.x+=this.settings.speedx*b),this.settings.speedy&&(this.displacement.y+=this.settings.speedy),this.settings.rotationx&&(this.displacement.rotation.x+=this.settings.rotationx),this.settings.rotationy&&(this.displacement.rotation.y+=this.settings.rotationy),this.settings.rotation&&(this.displacement.rotation+=this.settings.rotation*Math.PI/180));this.renderer.render(this.stage)},
onClick:function(){if(!this.supressEvents){var b=.001*this.settings.intertime;if(this.settings.interscalex||this.settings.interscaley){var a={ease:this.settings.intereasing,overwrite:"all"};this.settings.interscalex&&(a.x=this.orig.scalex+this.settings.interscalex);this.settings.interscaley&&(a.y=this.orig.scaley+this.settings.interscaley);punchgs.TweenLite.to(this.filter.scale,b,a)}punchgs.TweenLite.to(this.settings,b,{speedx:this.orig.speedx+this.settings.interspeedx,speedy:this.orig.speedy+this.settings.interspeedy,
rotation:this.orig.rotation+this.settings.interotation,ease:this.settings.intereasing,overwrite:"all"})}},onReturn:function(){if(!this.supressEvents){var b=.001*this.settings.intertime;punchgs.TweenLite.to(this.filter.scale,b,{x:this.orig.scalex,y:this.orig.scaley,ease:this.settings.intereasing,overwrite:"all"});punchgs.TweenLite.to(this.settings,b,{speedx:this.orig.speedx,speedy:this.orig.speedy,rotation:this.orig.rotation,ease:this.settings.intereasing,overwrite:"all"})}},onMouseMove:function(b){if(!this.supressEvents)if(this.entered){var a=
b.data.global.x;b=b.data.global.y;var c=a-this.x,g=b-this.y,e=Date.now();g=Math.sqrt(c*c+g*g)/(e-this.t);c=.001*this.settings.intertime;this.x=a;this.y=b;this.t=e;if(this.settings.interscalex||this.settings.interscaley){a={ease:this.settings.intereasing,overwrite:"all",onComplete:this.onReturn.bind(this)};this.settings.interscalex&&(a.x=this.settings.interscalex*g);this.settings.interscaley&&(a.y=this.settings.interscaley*g);var h=!0;punchgs.TweenLite.to(this.filter.scale,c,a)}a={speedx:this.orig.speedx+
this.settings.interspeedx,speedy:this.orig.speedy+this.settings.interspeedy,rotation:this.orig.rotation+this.settings.interotation,ease:this.settings.intereasing,overwrite:"all"};h||(a.onComplete=this.onReturn.bind(this));punchgs.TweenLite.to(this.settings,c,a)}else this.onMouseEnter(b)},onMouseEnter:function(b){this.supressEvents||(this.entered=!0,this.x=b.data.global.x,this.y=b.data.global.y,this.t=Date.now())},onMouseLeave:function(){this.entered=!1},eventsReady:function(){this.supressEvents=!1},
onComplete:function(){var b=this.nextslide.data("liquideffectcanvas");b&&!b.started&&b.animateIn();this.nextslide=!1},onUpdateIn:function(){this.tweenIn&&(this.displacement.rotation+=.02*this.tweenIn.progress(),this.displacement.scale.set(3*this.tweenIn.progress()))},onUpdateOut:function(){this.tweenOut&&(this.displacement.rotation+=.02*this.tweenOut.progress(),this.displacement.scale.set(3*this.tweenOut.progress()))},transitionIn:function(){var b=.001*this.settings.transtime,a={x:this.orig.scalex,
y:this.orig.scaley,ease:this.settings.easing,overwrite:"all",delay:this.del},c={speedx:this.orig.speedx,speedy:this.orig.speedy,rotationx:this.orig.rotationx,rotationy:this.orig.rotationy,rotation:this.orig.rotation,ease:this.settings.easing,overwrite:"all",delay:this.del};this.interactive&&"mousedown"===this.event?a.onComplete=this.eventsReady.bind(this):this.supressEvents=!1;this.settings.transpower&&(c.onUpdate=this.onUpdateIn.bind(this));punchgs.TweenLite.to(this.filter.scale,b,a);this.tweenIn=
punchgs.TweenLite.to(this.settings,b,c);punchgs.TweenLite.to(this.renderer.view,.5*b,{opacity:1,ease:this.settings.easing,overwrite:"all",delay:this.del});this.ticker.start()},animateIn:function(b){this.reset();this.started=!0;this.del=this.settings.transcross||b?5E-4*this.settings.transtime:0;this.timer=setTimeout(this.transitionIn.bind(this),this.del)},animateOut:function(b){clearTimeout(this.timer);this.tweenIn=null;this.supressEvents=!0;this.started=!1;var a=.001*this.settings.transtime,c={speedx:this.orig.speedx+
this.settings.transpeedx,speedy:this.orig.speedy+this.settings.transpeedy,rotationx:this.orig.rotationx+this.settings.transrotx,rotationy:this.orig.rotationy+this.settings.transroty,rotation:this.orig.rotation+this.settings.transrot,ease:this.settings.easing,overwrite:"all"};this.settings.transcross&&b&&(this.nextslide=b,c.onComplete=this.onComplete.bind(this));this.settings.transpower&&(c.onUpdate=this.onUpdateOut.bind(this));punchgs.TweenLite.to(this.filter.scale,a,{x:this.orig.scalex+this.settings.transitionx,
y:this.orig.scaley+this.settings.transitiony,ease:this.settings.easing,overwrite:"all"});this.tweenOut=punchgs.TweenLite.to(this.settings,a,c);punchgs.TweenLite.to(this.renderer.view,a,{opacity:0,ease:this.settings.easing,delay:.5*a})},reset:function(b){this.tweenOut=this.tweenIn=null;this.ticker.stop();clearTimeout(this.timer);punchgs.TweenLite.killTweensOf(this.filter.scale);punchgs.TweenLite.killTweensOf(this.settings);punchgs.TweenLite.killTweensOf(this.renderer.view);b||(this.settings.power&&
(this.displacement.rotation=0,this.displacement.scale.set(1)),this.displacement.x=this.w/2,this.displacement.y=this.h/2,this.displacement.rotation.x=0,this.displacement.rotation.y=0,this.displacement.rotation=0,this.settings.speedx=this.orig.speedx+this.settings.transpeedx,this.settings.speedy=this.orig.speedy+this.settings.transpeedy,this.settings.rotationx=this.orig.rotationx+this.settings.transrotx,this.settings.rotationy=this.orig.rotationy+this.settings.transroty,this.filter.scale.x=this.orig.scalex+
this.settings.transitionx,this.filter.scale.y=this.orig.scaley+this.settings.transitiony,this.renderer.view.style.opacity=0)},destroy:function(){this.ticker&&(this.reset(!0),this.container.pointerdown=null,this.container.pointerup=null,this.container.pointerover=null,this.container.pointerout=null,this.container.touchstart=null,this.container.touchend=null);this.renderer&&this.slide.remove(this.renderer.view);for(var b in this)this.hasOwnProperty(b)&&delete this[b]}}})();